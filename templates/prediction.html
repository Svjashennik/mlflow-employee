{% extends 'base.html' %}
{% load static %}

{% block content %}
  <body>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
            integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />
    <form id="ml_form" method="POST">
    <div class="container">
        <h1 style="color:#478448">Предсказание</h1>
      <p>Возраст:</p>
      <input type="number" id="Age">
      <br>
      <p>:</p>
      <input type="text" id="BusinessTravel">
      <br>
      <p>Дистанция до дома:</p>
      <input type="number" id="DistanceFromHome">
      <br>
      <p>Образование:</p>
      <input type="text" id="Education">
      <br>
      <p>Удовлетворенность окружением:</p>
      <input type="number" id="EnvironmentSatisfaction">
      <br>
      <p>Вовлечение в работу:</p>
      <input type="number" id="JobInvolvement">
      <br>
      <p>Уровень работы:</p>
      <input type="number" id="JobLevel">
      <br>
      <p>Удовлетвореность работой:</p>
      <input type="number" id="JobSatisfaction">
      <br>
      <p>Зарплата:</p>
      <input type="number" id="MonthlyIncome">
      <br>
      <p>Количество мест работы:</p>
      <input type="number" id="NumCompaniesWorked">
      <br>
      <p>Переработки:</p>
      <input type="text" id="OverTime">
      <br>
      <p>Удовлетворенность отношениями:</p>
      <input type="number" id="RelationshipSatisfaction">
      <br>
      <p>:</p>
      <input type="number" id="StockOptionLevel">
      <br>
      <p>Общий Стаж:</p>
      <input type="number" id="TotalWorkingYears">
      <br>
      <p>:</p>
      <input type="number" id="TrainingTimesLastYear">
      <br>
      <p>:</p>
      <input type="number" id="WorkLifeBalance">
      <br>
      <p>Лет в компании:</p>
      <input type="number" id="YearsAtCompany">
      <br>
      <p>Лет с последнего повышения:</p>
      <input type="number" id="YearsSinceLastPromotion">
      <br>
      <p>Департамент:</p>
      <input type="text" id="Department">
      <br>
      <p>Область образования:</p>
      <input type="text" id="EducationField">
      <br>
      <p>Пол:</p>
      <input type="text" id="Gender">
      <br>
      <p>Должность:</p>
      <input type="text" id="JobRole">
      <br>
      <p>Женатность:</p>
      <input type="text" id="MaritalStatus">
      <br>

      <button type="submit" value="Predict">Предсказать увольнение</button>
    </div>
    </form>
    <div class="container" id="alert" style="display:none;"></div>
  </body>

    {% block scripts %}
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
          integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous">
      </script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
          integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous">
      </script>
   <script>
   $(document).ready(function () {
          $('#ml_form').submit(function (e) {
              e.stopImmediatePropagation()
              let form = $(this)
              let data = {
            'Age':$("#Age").val(), 'BusinessTravel':$("#BusinessTravel").val(), 'DistanceFromHome':$("#DistanceFromHome").val(),
            'Education':$("#Education").val(), 'EnvironmentSatisfaction':$("#EnvironmentSatisfaction").val(),
            'JobInvolvement':$("#JobInvolvement").val(), 'JobLevel':$("#JobLevel").val(),
            'JobSatisfaction':$("#JobSatisfaction").val(), 'MonthlyIncome':$("#MonthlyIncome").val(),
            'NumCompaniesWorked':$("#NumCompaniesWorked").val(), 'OverTime':$("#OverTime").val(),
            'RelationshipSatisfaction':$("#RelationshipSatisfaction").val(), 'StockOptionLevel':$("#StockOptionLevel").val(),
            'TotalWorkingYears':$("#TotalWorkingYears").val(),
            'TrainingTimesLastYear':$("#TrainingTimesLastYear").val(), 'WorkLifeBalance':$("#WorkLifeBalance").val(),
            'YearsAtCompany':$("#YearsAtCompany").val(), 'YearsSinceLastPromotion':$("#YearsSinceLastPromotion").val(),
            'Department':$("#Department").val(), 'EducationField':$("#EducationField").val(),
            'Gender':$("#Gender").val(), 'JobRole':$("#JobRole").val(), 'MaritalStatus':$("#MaritalStatus").val()
            }
              $.ajax({
                  data: JSON.stringify(data),
                  contentType: "application/json",
                  url: "{% url 'result' %}",
                  type: 'POST',
                  dataType: 'json',
                  success: function (response) {
                        let alert = $('#alert')
                        if (response.prediction){
                        alert.text("Сотрудник не задержится")
                        }
                        else{
                            alert.text("Сотрудник задержится")
                        }
                        alert.show()
                  },
              });
              return false;
          });
      })
  </script>
{% endblock scripts %}


<style>
/* Bordered form */

/* Full-width inputs */
input[type=text], input[type=password], input[type=number] {
    width: 100%;
    padding: 12px 20px;
    margin: 8px 0;
    display: inline-block;
    border: 1px solid #ccc;
    box-sizing: border-box;
}

/* Set a style for all buttons */
button {
    background-color: #4CAF50;
    color: white;
    padding: 14px 20px;
    margin: 8px 0;
    border: none;
    cursor: pointer;
    width: 100%;
}

/* Add a hover effect for buttons */
button:hover {
    opacity: 0.8;
}


/* Add padding to containers */
.container {
  padding: 0 15px;
}

@media (min-width: 375.98px){
  .container {
    max-width: 340px;
    margin: auto;
    padding: 0;
  }
}

@media (min-width: 467.98px){
  .container {
    max-width: 420px;
  }
}

@media (min-width: 691.98px) {
  .container {
    max-width: 360px;
  }
}

@media (min-width: 799.98px){
  .container {
    max-width: 740px;
  }
}
</style>
{% endblock content %}